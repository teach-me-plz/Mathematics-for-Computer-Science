## 목차
- [Number Theory II](#number-theory-ii)
  - [서론](#서론)
  - [약수 관계 (Divisibility)](#약수-관계-divisibility)
    - [나눗셈 알고리즘](#나눗셈-알고리즘)
    - [유클리드 알고리즘](#유클리드-알고리즘)
  - [분해기 (The Pulverizer)](#분해기-the-pulverizer)
  - [모듈러 산술 (Modular Arithmetic)](#모듈러-산술-modular-arithmetic)
      - [Lemma \& Proof](#lemma--proof)
  - [암호학](#암호학)
    - [Turing's Code v1](#turings-code-v1)
    - [튜링코드 부수기 v1](#튜링코드-부수기-v1)

---

# Number Theory II

## 서론

정수론은 정수를 연구하는 학문이다.   
정수를 굳이 연구할 이유가 있을까?    

일단 뭘 더 알아야 하는가?   
1, 2, 3, ... 아 그래 -1, -2, ...  도 있다.   

이 숫자들에 실용적인 가치가 있긴 할까?   

수학자 G. H. Hardy는 이런말을 남겼다.   

>"We may be justified in rejoicing that there is at any rate one science, and that our own, whose very remoteness from ordinary human activities should keep it gentle and clean."

> "우리는 적어도 하나의 과학, 그리고 그것이 바로 우리 자신의 학문이라는 사실에 기뻐해도 될지도 모른다. 그 학문은 일상적인 인간 활동과 매우 동떨어져 있기 때문에 순수하고 온화하게 남을 수 있다."

Hardy는 정수론이 전쟁에 이용되지 않기를 바랬다.   
정수론은 현대 암호학의 기반이 된다.   

이 스터디의 누군가의 말을 인용하자면,
> 암호학이란 안전하지 않은 채널에서 안전한 통신을 하는것.   

이러한 기술은 전쟁에서 매우 핵심적이다.   
안타깝게도 말이다.   

정수론은 우리가 이전에 배운 증명 기법을 연습하고 적용하기에 훌륭한 환경을 제공한다.   

우리는 정수의 성질에 초점을 맞출 것이며 모든 변수는 정수 집합 $\mathbb{Z}$를 범위로 갖는다고 기본적으로 가정할 것이다.   

---

## 약수 관계 (Divisibility) 

정수론의 본질은 여기서 드러난다.   

$a | b$는 어떤 정수 $k$에 있어서 $a *k = b$ 일 때 성립한다.   
이는 다른 말로 $"a가 b를 나눈다"$, $"b는 a의 배수"$ 라고도 한다.   

$a \nmid b$ 라면 어떨까?   
이 경우에는 몫(Quotient)과 나머지(remainder)가 생긴다.   

### 나눗셈 알고리즘

$n, d$는 정수이고 $d > 0$ 이라고 하자.   
그렇다면 유일한 정수 $q$(uotient), $r$(emainder)이 존재하며 다음을 만족한다.   

$$n = qd+r \quad where \quad 0\le r < d$$

이를 표기할때는 다음과 같이 한다.   
$$quot(n, d) = q, \quad rem(n, d) = r$$

이러한 알고리즘은 수학 전체에서 가장 중요한 알고리즘 중 하나로 이어진다.

### 유클리드 알고리즘

최대공약수를 구할 수 있는 알고리즘이다.   
$31$과 $46$의 $gcd$를 구하고자 한다면 나머지를 계속 계산해 나가면 된다다.   

$$46 = 1 * 31 + 15$$
$$31 = 2 * 15 + 1$$
$$15 = 15 * 1 + 0$$

이로서 $gcd(31, 46)$(31과 46의 최대공약수)는 나머지인 $1$ 이다.   

음... 이걸 한번 거꾸로 계산해보자.(마치 연어처럼 식을 거슬러 올라가는 거다.)   

두 번째 식에서

$$31 = 2 * 15 + 1$$
$$↓$$
$$1 = 31 - 2 * 15$$

첫 번째 식에서

$$46 = 1 * 31 + 15$$
$$↓$$
$$15 = 46 - 1 * 31$$

이를 정리하면 1은 31과 46의 [선형결합](../용어%20정리/선형결합(linear%20combination).md)이 된다.   

이렇게 일반적으로 두 정수 $a$, $b$의 최대공약수는 a와 b의 선형결합으로 표현할 수 있다.   

이러한 성질을 [**베주 항등식(Bézout's identity)**](../용어%20정리/베주%20항등식(Bézouts%20identity).md) 이라고 한다.

## 분해기 (The Pulverizer)

항상 gcd(a, b)를 다음과 같은 선형 결합으로 표현할 수 있다.   

$$gcd(a,b) = sa + tb$$

$s,t \in \mathbb{Z}$

분해기는 이러한 $s$와 $t$를 계산하는 알고리즘이다.   
이 알고리즘은 gcd가 나머지들로 어떻게 구성되는지를 추적하여 해를 찾아낸다.   

다시 $31$과 $46$을 분해기에 넣어보자.   

$$46 = 1 * 31 + 15$$
$$31 = 2 * 15 + 1$$
$$15 = 15 * 1 + 0$$

이걸 역순으로 계산해 보겠다.

$$1 = 31 - 2 * 15$$
$$= 31 - 2(46 - 1 * 31)$$
$$= 3 * 31 - 2 * 46$$

즉,   
$$1 = 3 * 31 - 2 * 46$$

따라서 $s = 3$, $t = -2$로 두면 된다.   

이는 유클리드 알고리즘의 확장판이며 **확장 유클리드 알고리즘**이라고도 불린다.   

---

## 모듈러 산술 (Modular Arithmetic)

정수론의 전설, $1 + 1 = 2$를 증명한 가우스는 **합동(congruence)**의 개념을 소개했다.   

$a \equiv b \pmod{n}$   
$a$와 $b$는 법 $n$에 대하여 합동관계이다.   
이는 $n$이 $(a - b)$를 나눈다는 뜻이다.   
여기서 $b$는 나머지라고 생각하면 편하다.   

여기 간단한 예제가 있다.    
$$29 \equiv 15 \pmod{7}$$
$$29 - 15 = 14 \quad and \quad 7 \mid 14$$

여기서 합동이란 $a - b$가 $n$의 배수이면, 두 수는 $\mod{n}$에서 같은 나머지를 가진다는 의미다.   

즉, $29 % 7 = 1$, $15 % 7 = 1$ 로 $a$, $b$ 두 수 모두 n에 대하여 동일한 나머지를 가진다.   

[≡](../용어%20정리/≡.md) 란? 


위의 합동을 풀어서 쓰면 다음과같은 Lemma가 나온다.   

#### Lemma & Proof

$$a \equiv b \pmod{n} \iff rem(a,n) = rem(b,n)$$

<details markdown="1">
<summary> rem 연산이란? </summary>

| 연산                        | 값     | 설명                                      |
| --------------------------- | ------ | ----------------------------------------- |
| $-7 \bmod 3$                | **2**  | 항상 $0 \le r < b$                        |
| $-7 \mathbin{\text{rem}} 3$ | **-1** | 나눗셈 결과를 0에 가장 가까운 정수로 버림 |

</details>

Lemma가 나왔으니 우리가 할 일은 아주 간단하다.   
바로 "**증명**"을 하는 것이다.   

<details markdown="1">
<summary> Proof </summary>

이전에 다루었던 나눗셈 알고리즘에 따라 다음을 만족하는 유일한 정수 쌍 $q_1$, $r_1$, $q_2$, $r_2$가 존재한다.   

$$a = q_1 * n + r_1, \quad 0 \le r_1 < n$$
$$b = q_2 * n + r_2, \quad 0 \le r_2 < n$$

이 둘을 빼면:   
$$a - b = (q1 - q2) * n + (r_1 - r_2)$$

이제 $a \equiv b \pmod{n} \iff n \mid (a - b)$가 된다.   

이는 곧 $n \mid (r_1 - r_2)$가 되어야 한다는 뜻이다.   
하지만 나눗셈 알고리즘의 조건을 살펴보면 $-n < r_1 - r_2 < n$이므로, $r_1 - r_2$가 $n$의 배수일 수 있는 경우는 오직 $r_1 - r_2 = 0$으로 $r_1 = r_2$뿐이다.   

</details>

자 이와 같이 모듈러 산술은 일반 산술과 매우 유사한 성질들을 많이 가지고 있다.   

$a \equiv b \pmod{n},$, $c \equiv d \pmod{n}$이면, 다음이 성립한다.   
$$a + c \equiv b + d \pmod{n}$$
$$a * c \equiv b * d \pmod{n}$$

자 증명을 해보자.   

<details markdown="1">
<summary> Proof </summary>

농담이다 증명은 추가적으로 하지는 않겠다.   
대신 예제를 몇개 해보면, 이들이 잘 동작한다는 것 알 수 있다.   

</details>


하지만 일반 산술과는 달리 모듈러 산술은 값이 $n$에 맞춰 유한하다는 것이다.   

예를 들어, $\pmod{7}$에서는 가능한 값이 다음뿐이다.   
$$0, 1, 2, 3, 4, 5, 6$$

모든 정수들은 이들 중 하나와 $\pmod{7}$에서 합동이다.   
이런 의미에서, 모듈러 산술은 **유한한 산술(finite arithmetic)**이다.    

이러한 성질로 모듈러 산술은 많은 컴퓨터 응용 분야에서 유용하게 쓰인다.   
그 예로, 모듈러 산술은 중요한 암호화 기법들의 기초가 된다.   

자, 이제 암호화로 넘어가보자.

---

## 암호학

저번주는 앨런튜링의 생일이었다.   
사실 이 정수론을 이용한 암호화 방법은 1937년 가을, 튜링 자신이 “수(數)를 곱해서 암호화하는 방식”을 구상했다는 설명만 남아있고 정확한 내용이 남아있지도 않다.   

그 이유로는 암호 연구는 당대에 군사기밀로 묶였고, 튜링도 전쟁 후 공개 논문을 내지 않았기 때문이다.   

남은 자료로는 동료학자에게 보내는 편지나 경매에 나온 노트 뿐이다.   

2000년대 MIT OCW 강의에서 위의 암호학을 재구성한 `Turing's Code`노트가 있으며 우리는 이 내용에 대해 다뤄볼 것이다.   

다음은 그 암호가 작동한 방식이다.   

### Turing's Code v1

당신이 `victory` 라는 메시지를 보내고 싶다고 하자.

각 알파벳들은 정수계산을 위해 알파벳 순서로 바꾼다.   
그럼 다음과 같은 숫자가 된다.   

$$v = 22, i = 9, c = 3, t = 20, o = 15, r = 18, y = 25$$

그렇게 메시지는 다음과 같은 숫자로 변환된다.   
$$22090320151825$$

`Turing's Code v1`은 메시지가 소수여야하기에 뒤에 $1, 3$을 더해 소수로 만든다.    
$$2209032015182513$$

이것을 **평문 메시지**라고 부르며 $m$이라 칭하겠다.   

이제 암호화를 위해 큰 소수 $k$를 비밀 키로 선택한다.   

암호문 $m^{*}$을 받으면, 그것을 k로 나눠서 복호화 하는 것이다.   

이러한 소수를 이용하는 방식은 큰 소수 두 개를 곱한 합성수를 인수분해하는 효율적인 알고리즘이 존재하지 않아 시간이 굉장이 오래 걸린다는 점을 이용하여 사용된다.   

### 튜링코드 부수기 v1

하지만 이 튜링 코드에는 중대한 결함이 있었으니, 적이 암호화된 메시지를 2개를 가지게 되었다고 생각해보자.   
$m1^{*}, m2^{*}$의 최대공약수는 바로 비밀키 $k$가 되며 앞서 보았듯 두 수의 $\gcd$는 매우 효율적으로 계산할 수 있다.    

앨런 튜링과 같은 수학자가 이런 실수를 했을리 없기 때문에 우리는 이를 모듈러 산술에 기반한 약간 다른 시스템을 염두해 두었을 수 있다고 생각해 보는 것이다.    

